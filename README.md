# FaceRecognition

归易——人脸识别考勤系统，2020夏季学期工业实训公开版

## 团队成员

尚未征得团队成员的同意，敬请期待

1. XXX——组长
2. 董成相
3. XXX
4. XX

## 应用背景

随着时代的发展，学生人数日益增加，各大学校人员管理面临巨大的挑战，对学生考勤有着新的需求。人工考勤效率低、人为误差大、造成人力物力的浪费，已经不再适应时代的发展，随着计算机技术的发展，利用人脸识别对学校考勤有着高效的帮助，提高了工作效率和准确率。

我们做的项目是人脸识别考勤系统“**归易**”，客户端采用安卓平台运行，数据库使用`SQLite`建立。针对需求，用户分为学生和管理员。

## 如何安装该应用

### 思路一：开发人员自行打包安装

#### 方法一：直接使用真机进行调试

1. 使用Android Studio打开本项目
2. 连接真机
3. 点击运行

#### 方法二：打包成APK测试安装包

1. 使用Android Studio打开本项目

2. 依次点击菜单栏`Build -> Build Bundle(s) / APK(s) -> Build APK(s)`

3. 这里有两种方式找到打包完成的APK

    1. AS在Build完成之后，会在窗口的右下角弹出一个提示，点击`locate`即可

        <img src="./ImagesForReadme/build apk.png" alt="Build完成提示，有`locate`字样" style="zoom:100%;" />

    2. 手动定位`./app/build/outputs/apk/debug/app-debug.apk`

4. 将安装包发送到手机安装

#### 方法三：打包成正式的发布安装包

1. 请参阅互联网资料进行打包
2. 将安装包发送到手机安装

### 思路二：直接使用Release安装包

1. 下载Release中的安装包（该安装包与思路一中的方法二相同）
2. 将安装包发送到手机安装

## `DatabaseHelper.java`文件中硬编码的测试数据

### 一、管理员用户

| 工号      | 密码 |
| --------- | ---- |
| 100000001 | abc  |
| 100000002 | abc  |
| 100000003 | abc  |

### 二、学生用户

| 学号      | 密码 |
| --------- | ---- |
| 201810325 | abc  |
| 201810324 | abc  |
| 201810329 | abc  |

### 三、学生信息

| 学号      | 姓名   | 班号    | 公寓楼号 | 寝室号 |
| --------- | ------ | ------- | -------- | ------ |
| 201810325 | 张三   | 2018103 | 5        | 414    |
| 201810326 | 王五   | 2018103 | 5        | 415    |
| 201810229 | 李四   | 2018102 | 5        | 414    |
| 201810324 | 张三丰 | 2018103 | 5        | 414    |
| 201810327 | 张无忌 | 2018103 | 5        | 415    |
| 201810329 | 周杰伦 | 2018103 | 5        | 415    |

### 四、签到结果

0表示未签到，1表示已签到

| 学号      | 密码                | 签到结果 |
| --------- | ------------------- | -------- |
| 201810329 | 2020-10-13 07:56:38 | 0        |
| 201810325 | 2020-10-13 08:02:33 | 0        |
| 201810329 | 2020-10-14 07:09:50 | 1        |
| 201810229 | 2020-10-13 06:55:20 | 1        |
| 201810325 | 2020-10-23 07:34:28 | 1        |
| 201810329 | 2020-10-03 07:34:54 | 1        |
| 201810329 | 2020-10-04 08:10:35 | 1        |
| 201810329 | 2020-10-05 08:05:40 | 1        |
| 201810324 | 2020-10-03 07:20:23 | 1        |
| 201810324 | 2020-10-13 08:00:23 | 0        |
| 201810329 | 2020-10-13 06:40:56 | 0        |

## 如何使用该应用

### 环境要求

1. Android armeabi-v7a
2. Android arm64-v8a

#### 环境确认方式

1. 使用`ADB`命令：[点此查看确认方式](https://blog.csdn.net/qq_36317441/article/details/89494686)
2. 打开本项目，在`AS`中连接真机，若不符合则会在选择设备的位置有相应提示

### 系统要求

1. Android `API Level 21` - `API Level 28`
2. `Android 5.0` - `Android 9`

### 使用准备

#### 第一步：注册成为`虹软视觉开放平台开发者`

1. [点击前往注册](https://ai.arcsoft.com.cn/ucenter/resource/build/index.html#/login)

2. 参阅新手指南获取`APP ID`和`SDK KEY`

    <img src="./ImagesForReadme/新手指南.png" alt="虹软官方新手指南" style="zoom:60%;" />

#### 第二步：激活引擎

1. 启动APP，确保手机联网

2. 使用管理员账户登录

3. 点击右上角菜单中的激活引擎

    <img src=".\ImagesForReadme\点击菜单.png" alt="点击菜单中的激活引擎" style="zoom:55%;" />

4. 输入`APP ID`和`SDK KEY`

5. 点击`激活引擎`按钮

6. 提示`引擎初始化成功！`便说明激活成功，此后不需再次激活

    激活引擎在以下情况下会失效：

    1. 应用被卸载
    2. 手机硬件信息发生改变
    3. 重装系统
    4. 其他可能的情况

### 开始使用

#### 通用的功能

1. 找回密码
    1. 在登陆界面点击`找回密码`
    2. 输入用户名和新密码
    3. 点击`重置`按钮即可

#### 管理员的功能

1. 激活引擎，`使用准备`中已介绍，不再于此赘述
2. 批量注册
    1. 批量注册
        1. 将需要注册的人脸图片放到指定路径下
        2. 命名格式：学号.jpg
        3. 支持的图片格式：jpg
    2. 清空人脸库
3. 学生信息录入
    1. 录入学生的基本信息
    2. 给学生的账户设置密码
4. 查询学生信息，也就是以公寓楼号结合寝室号查询学生的签到信息
5. 修改学生状态，即修改学生的签到结果
    1. 输入待修改学生的学号
    2. 点击某一条记录便可以进行状态修改

#### 学生的功能

1. 人脸签到
    1. 人脸签到
        1. 自动追踪人脸相机中的人脸
        2. 仅在与人脸库中的人脸信息相符时提示签到成功，其他情况默认签到失败
    2. 注册，注册条件如下：
        1. 非当前用户不能注册，也就是当前识别出来的人脸已保存在人脸库中，并且不是当前登录的用户，不得注册
        2. 人脸库中已含有当前登录用户的人脸信息，不得重复注册
        3. 当检测到未知人脸时，并且人脸库中尚无当前登录用户的人脸信息，则可以进行注册
    3. 切换相机，切换前后置相机
2. 查看签到记录，用于让学生查看核对自己的签到结果
